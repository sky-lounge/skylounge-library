---
blueprint-uri: sky-lounge/skylounge-library/blueprints/cloudfoundry/bosh/blueprint.yml

workflows:
  - workflow: pull-request
    jobs:
      - job: unit-test
        steps:
          - step: unit-test
            uri: # The URI to the unit-test step definition. Example: sky-lounge/skylounge-library/steps/unit-test/nginx/unit-test.yml
      - job: dependency-review
        params:
          config_file: # Specifies a path to a configuration file. The configuration file for an org should reside in a SkyLounge Library. Format: OWNER/REPOSITORY/FILENAME@BRANCH. Configuration options: https://github.com/actions/dependency-review-action#configuration-options.
          external_repo_token: # Specifies a token for fetching the configuration file from the SkyLounge Library. The token must have read access to the repository.
  - workflow: development
    jobs:
      - job: deploy
        steps:
          - step: pre-deploy
            uri: # The URI to the pre-deploy step definition. Use sky-lounge/skylounge-library/steps/no-step/step.yml to skip pre-deploy setup. Example: sky-lounge/hello-cf/skylounge/pre-deploy.yml
          - step: deploy
            uri: # The URI to the deploy step definition. Example: sky-lounge/skylounge-library/steps/cloudfoundry/deploy/deploy.yml
      - job: integration-test
        uri: # The URI to your integration tests job definition. Example: sky-lounge/hello-cf/skylounge/integration-test.yml
    params:
      build_paths: # An array of paths which trigger the build job on change. Example: ["public","nginx.conf","skylounge","cf/dev-manifest.yml"]
      dev_endpoint: # The dev app route/enpdoint. Example: https://hello-cf.skylounge.dev
params:
  main_branch: # The name of the main branch in the repository. Example: "main"

