---
blueprint-uri: sky-lounge/skylounge-library/blueprints/cloudfoundry/cloud-gov/blueprint.yml

workflows:
  - workflow: pull-request
    jobs:
      - job: unit-test
        steps:
          - step: unit-test
            uri: # The URI to the unit-test step definition. Example: sky-lounge/skylounge-library/steps/unit-test/nginx/unit-test.yml
      - job: dependency-review
        params:
          config_file: # Specifies a path to a configuration file. The configuration file for an org should reside in a SkyLounge Library. Format: OWNER/REPOSITORY/FILENAME@BRANCH. Configuration options: https://github.com/actions/dependency-review-action#configuration-options.
      - job: codeql
        steps:
          - step: build
            uri: # The URI to the build step definition. Example: sky-lounge/skylounge-library/steps/github/security/codeql/auto-build/step.yml
  - workflow: development
    jobs:
      - job: deploy
        steps:
          - step: _pre-deploy
            uri: # OPTIONAL: The URI to the pre-deploy step definition. Remove this value to omit the pre-deploy step. Example: sky-lounge/hello-cloudgov/skylounge/pre-deploy.yml
          - step: deploy
            uri: # The URI to the deploy step definition. Example: sky-lounge/skylounge-library/steps/cloudfoundry/deploy/deploy.yml
      - job: integration-test
        uri: # The URI to your integration tests job definition. Example: sky-lounge/hello-cloudgov/skylounge/integration-test.yml
  - workflow: production
    jobs:
      - job: deploy
        steps:
          - step: _pre-deploy
            uri: # OPTIONAL: The URI to the pre-deploy step definition. Remove this value to omit the pre-deploy step. Example: sky-lounge/hello-cloudgov/skylounge/pre-deploy.yml
          - step: deploy
            uri: # The URI to the deploy step definition. Example: sky-lounge/skylounge-library/steps/cloudfoundry/deploy/deploy.yml
  - workflow: scans
    jobs:
      - job: dependency-review
        params:
          config_file: # Specifies a path to a configuration file. The configuration file for an org should reside in a SkyLounge Library. Format: OWNER/REPOSITORY/FILENAME@BRANCH. Configuration options: https://github.com/actions/dependency-review-action#configuration-options.

params:
  build_paths: # An array of paths which trigger the build job on change. Example: ["public","nginx.conf","skylounge","cf/dev-manifest.yml"]
  main_branch: # The name of the main branch in the repository. Example: "main"

