---
blueprint-uri: sky-lounge/skylounge-library/blueprints/trunk/webapp/blueprint.yml
workflows:
  - workflow: development
    jobs:
      - job: unit-test
        steps:
          - step: unit-test
            uri: # The URI to the unit-test step definition. Example: sky-lounge/skylounge-library/steps/unit-test/nginx/unit-test.yml
      - job: build
        steps:
          - step: authenticate-to-image-repository
          - step: build-container-image
            uri: # Enter the URI to the step definition used to build the container image for your application. Example: sky-lounge/public-skylounge-library/steps/build/pack/java/gradlew/build.yml
          - step: push-container-image
      - job: deploy
        uri: # The URI to the deploy job. Example sky-lounge/skylounge-library/jobs/gcp/cloud-run/deploy/deploy.yml
      - job: integration-test
        uri: # The URI to your integration tests. Example: sky-lounge/hello-app/skylounge/integration-test.yml
    params:
      build_paths: # An array of paths which trigger the build job on change. Example: ["src/**", "build.gradle", "service.yaml"]
      main_branch_name: # The name of the main branch in this repository as an array. Example ["main"]
      registry_url: # The artifact registry url where container images are stored. Example: us-central1-docker.pkg.dev/skylounge-common/skylounge-registry
